<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Weather Map</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">

</head>
<body>
    <h1 id="title">The Weather App</h1>
    <h2>San Antonio</h2>

    <div  class="container-fluid">
        <div class="row">
            <!--INPUT FOR LAT AND LON-->
            <!--<div class="col-lg-6 pb-5">-->
                <div class="input-group">
                    <div class="input-group-prepend">
                      <span class="input-group-text">Location</span>
                    </div>
                    <input type="text" id="newLat" class="form-control" placeholder="Search for..." autofocus>
                    <input type="text" id="newLon" class="form-control" placeholder="Search for...">
                    <button id="submitButton" class="btn btn-secondary" type="button">Search</button>
                </div>

            <!--THREE DAY FORECAST CARDS-->
            <div class="col-4">
                <div class="card text-center">
                    <div class="card-block">
                        <h3 class="card-title bg-info">Day 1</h3>
                        <table id="tbl1" class="insertWeather card-text"></table>
                    </div>
                </div>
            </div>
            <div class="col-4">
                <div class="card text-center">
                    <div class="card-block">
                        <h3 class="card-title bg-info">Day 2</h3>
                        <table id="tbl2" class="insertWeather card-text"></table>
                    </div>
                </div>
            </div>
            <div class="col-4">
                <div class="card text-center">
                    <div class="card-block">
                        <h3 class="card-title bg-info">Day 3</h3>
                        <table id="tbl3" class="insertWeather card-text"></table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--END OF BODY CONTENT-->
    <!--JQUERY-->
    <script src="js/jquery-2.x-git.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
    <!-- BOOTSTRAP -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script>
        (function() {
            "use strict";

            function loadTable() {
                var trHTML = '';

                $('#submitButton').click(function(){
                var lat = $('#newLat').val();
                var lon = $('#newLon').val();
                console.log(lat);
                console.log(lon);


                $.get("https://api.openweathermap.org/data/2.5/forecast", {
                    APPID: "8f5c57daacb4b80dfbaab615e6a89e18",
                    lat: lat,
                    lon: lon,
                    units: "imperial"


                }).done(function (forecast) {


                        for (var i = 0; i < forecast.list.length; i++) {

                                trHTML = '<tr><td>' + forecast.list[i].main.temp_max + 'ยบ' + '/' + forecast.list[i].main.temp_min + 'ยบ' + '</td></tr><tr><td>' + '</td><tr></tr><td>' + '<strong>Humidity: </strong>' + forecast.list[i].main.humidity + '</td><tr></tr><td>' + '<strong>Wind:  </strong>' + forecast.list[i].wind.speed + ' mph' + '</td><tr></tr><td>' + '<strong>Pressure: </strong>' + forecast.list[i].main.pressure + '</td></tr>';
                            // });
                            // console.log(i)
                                if (i === 0) {
                                    $('#tbl1').html(trHTML);
                                }else if (i === 8) {
                                    $('#tbl2').html(trHTML);
                                }else if (i === 16) {
                                    $('#tbl3').html(trHTML);
                                }
                        };
                        //End of loop
                    });
            });

            };

            // DEFAULT LAT AND LON

            $.get("https://api.openweathermap.org/data/2.5/forecast", {
                APPID: "8f5c57daacb4b80dfbaab615e6a89e18",
                lat: 29.423017,
                lon: -98.48527,
                units: "imperial"


            }).done(function (forecast) {


                for (var i = 0; i < forecast.list.length; i++) {

                    var trHTML = '<tr><td>' + forecast.list[i].main.temp_max + 'ยบ' + '/' + forecast.list[i].main.temp_min + 'ยบ' + '</td></tr><tr><td>' + '</td><tr></tr><td>' + '<strong>Humidity: </strong>' + forecast.list[i].main.humidity + '</td><tr></tr><td>' + '<strong>Wind:  </strong>' + forecast.list[i].wind.speed + ' mph' + '</td><tr></tr><td>' + '<strong>Pressure: </strong>' + forecast.list[i].main.pressure + '</td></tr>';
                    // });
                    // console.log(i)
                    if (i === 0) {
                        $('#tbl1').html(trHTML);
                    }else if (i === 8) {
                        $('#tbl2').html(trHTML);
                    }else if (i === 16) {
                        $('#tbl3').html(trHTML);
                    }
                };
                //End of loop
            });
            loadTable();
        })();



        // })();


    </script>
    
</body>
</html>

